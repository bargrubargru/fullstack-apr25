var ABTest=function(r,x){function h(k){console.log("%cABTest :::","background:red;color:white;",k)}function y(k){for(var n=0;n<k.length&&l;n++)for(var t=k[n],p=0;p<t.addedNodes.length;p++){var d=t.addedNodes[p],a=void 0,e=null==(a=d.dataset)?void 0:a.testId,b=void 0;a=null==(b=d.dataset)?void 0:b.testRunning;b=void 0;var f=null==(b=d.dataset)?void 0:b.testVariants;if(!e)break;l--;l||(q.disconnect(),h("observer disconnected"));if("false"===a){delete g[e];localStorage.setItem("mako_abtest_new",JSON.stringify(g));
h("test done for: "+e);break}if(0===g[e]||1===JSON.parse(f).length){h("swap (on server) done for test: "+e);break}if(!d.ready){d.ready=!0;e=d.dataset;b=a=e.testId;f=e.testVariants;var c=g[b];"number"!==typeof c&&(c=r.crypto||r.msCrypto,f=JSON.parse(f).length,c=c?crypto.getRandomValues(new Uint16Array(1))[0]%f:Math.floor(Math.random()*f));b=g[b]=c;localStorage.setItem("mako_abtest_new",JSON.stringify(g));if(0===b)h("swap (on server) done for test: "+a);else{c=b;a=e;e=a.testId;var m=JSON.parse(a.testVariants);
a=d.querySelector('[data-type="title"]');b=d.querySelector('[data-type="subtitle"]');f=d.querySelector('[data-type="image"] img');c=m[c];m=c.title;var u=c.subtitle,v=c.imageUrl;c=c.url;m&&a&&(a.innerHTML=m);u&&b&&(b.innerHTML=u);f&&v&&(f.src=v);d=d.querySelectorAll('a:not([href="#"])');for(a=0;a<d.length;a++)d[a].href=c;h("swap (on client) done for test: "+e)}}}}var g=[],q,w,l;return{init:function(k){w=x.querySelector("main");l=k;g=JSON.parse(localStorage.getItem("mako_abtest_new")||"{}");q=new MutationObserver(y);
q.observe(w,{childList:!0,subtree:!0,attributeFilter:["data-test-id"]});h("init done")}}}(window,document);